{"id":"BGc2","dependencies":[{"name":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js.map","includedInParent":true,"mtime":1606744555153},{"name":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\package.json","includedInParent":true,"mtime":1609144240016},{"name":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\package.json","includedInParent":true,"mtime":1606744555153},{"name":"./IHubProtocol","loc":{"line":3,"column":28},"parent":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js","resolved":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\IHubProtocol.js"},{"name":"./ILogger","loc":{"line":4,"column":25},"parent":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js","resolved":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\ILogger.js"},{"name":"./ITransport","loc":{"line":5,"column":31},"parent":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js","resolved":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\ITransport.js"},{"name":"./Loggers","loc":{"line":6,"column":27},"parent":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js","resolved":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\Loggers.js"},{"name":"./TextMessageFormat","loc":{"line":7,"column":34},"parent":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\JsonHubProtocol.js","resolved":"D:\\work\\Rainmaker2\\Rainmaker2\\src\\Presentation\\libraries\\rainsoft-authorization\\node_modules\\@microsoft\\signalr\\dist\\esm\\TextMessageFormat.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.JsonHubProtocol=void 0;var e=require(\"./IHubProtocol\"),t=require(\"./ILogger\"),o=require(\"./ITransport\"),r=require(\"./Loggers\"),s=require(\"./TextMessageFormat\"),a=\"json\",n=function(){function n(){this.name=a,this.version=1,this.transferFormat=o.TransferFormat.Text}return n.prototype.parseMessages=function(o,a){if(\"string\"!=typeof o)throw new Error(\"Invalid input for JSON hub protocol. Expected a string.\");if(!o)return[];null===a&&(a=r.NullLogger.instance);for(var n=[],i=0,p=s.TextMessageFormat.parse(o);i<p.length;i++){var g=p[i],l=JSON.parse(g);if(\"number\"!=typeof l.type)throw new Error(\"Invalid payload.\");switch(l.type){case e.MessageType.Invocation:this.isInvocationMessage(l);break;case e.MessageType.StreamItem:this.isStreamItemMessage(l);break;case e.MessageType.Completion:this.isCompletionMessage(l);break;case e.MessageType.Ping:case e.MessageType.Close:break;default:a.log(t.LogLevel.Information,\"Unknown message type '\"+l.type+\"' ignored.\");continue}n.push(l)}return n},n.prototype.writeMessage=function(e){return s.TextMessageFormat.write(JSON.stringify(e))},n.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,\"Invalid payload for Invocation message.\"),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,\"Invalid payload for Invocation message.\")},n.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,\"Invalid payload for StreamItem message.\"),void 0===e.item)throw new Error(\"Invalid payload for StreamItem message.\")},n.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error(\"Invalid payload for Completion message.\");!e.result&&e.error&&this.assertNotEmptyString(e.error,\"Invalid payload for Completion message.\"),this.assertNotEmptyString(e.invocationId,\"Invalid payload for Completion message.\")},n.prototype.assertNotEmptyString=function(e,t){if(\"string\"!=typeof e||\"\"===e)throw new Error(t)},n}();exports.JsonHubProtocol=n;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":97}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":99}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":103}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":105}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":113}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":131}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":133}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":141}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":154}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":156}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":164}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":180}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":182}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":190}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":203}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":205}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":213}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":1,"column":236}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":10,"column":39},"generated":{"line":1,"column":238}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":245}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":247}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":258}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":267}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":271}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":16,"column":20},"generated":{"line":1,"column":276}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":16,"column":35},"generated":{"line":1,"column":281}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":18,"column":20},"generated":{"line":1,"column":283}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":18,"column":20},"generated":{"line":1,"column":288}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":18,"column":38},"generated":{"line":1,"column":296}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":298}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":303}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":21,"column":53},"generated":{"line":1,"column":318}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":21,"column":68},"generated":{"line":1,"column":320}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":21,"column":68},"generated":{"line":1,"column":335}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":340}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":347}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":349}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":359}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":4},"generated":{"line":1,"column":373}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":382}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":28,"column":40},"generated":{"line":1,"column":384}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":30,"column":12},"generated":{"line":1,"column":387}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":390}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":30,"column":19},"generated":{"line":1,"column":407}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":409}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":415}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":31,"column":22},"generated":{"line":1,"column":419}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":31,"column":28},"generated":{"line":1,"column":425}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":34,"column":12},"generated":{"line":1,"column":484}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":488}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":35,"column":19},"generated":{"line":1,"column":490}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":35,"column":19},"generated":{"line":1,"column":496}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":499}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":38,"column":12},"generated":{"line":1,"column":506}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":510}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":1,"column":512}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":39,"column":32},"generated":{"line":1,"column":514}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":39,"column":32},"generated":{"line":1,"column":525}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":535}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":43,"column":14},"generated":{"line":1,"column":539}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":45,"column":14},"generated":{"line":1,"column":543}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":45,"column":28},"generated":{"line":1,"column":545}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":548}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":550}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":552}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":43,"column":25},"generated":{"line":1,"column":554}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":43,"column":43},"generated":{"line":1,"column":556}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":43,"column":43},"generated":{"line":1,"column":574}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":43,"column":49},"generated":{"line":1,"column":580}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":583}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":585}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":587}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":30},"generated":{"line":1,"column":594}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":40},"generated":{"line":1,"column":598}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":19},"generated":{"line":1,"column":599}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":19},"generated":{"line":1,"column":603}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":26},"generated":{"line":1,"column":605}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":46,"column":26},"generated":{"line":1,"column":607}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":47,"column":18},"generated":{"line":1,"column":610}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":47,"column":34},"generated":{"line":1,"column":612}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":47,"column":39},"generated":{"line":1,"column":617}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":47,"column":45},"generated":{"line":1,"column":623}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":48,"column":16},"generated":{"line":1,"column":626}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":48,"column":46},"generated":{"line":1,"column":629}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":48,"column":23},"generated":{"line":1,"column":646}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":48,"column":37},"generated":{"line":1,"column":648}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":49,"column":22},"generated":{"line":1,"column":653}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":49,"column":22},"generated":{"line":1,"column":659}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":1,"column":663}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":49,"column":32},"generated":{"line":1,"column":669}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":689}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":696}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":51,"column":34},"generated":{"line":1,"column":698}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":704}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":52,"column":21},"generated":{"line":1,"column":709}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":52,"column":33},"generated":{"line":1,"column":711}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":52,"column":33},"generated":{"line":1,"column":723}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":734}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":739}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":53,"column":45},"generated":{"line":1,"column":759}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":54,"column":20},"generated":{"line":1,"column":762}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":55,"column":21},"generated":{"line":1,"column":768}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":55,"column":21},"generated":{"line":1,"column":773}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":1,"column":775}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":1,"column":787}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":798}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":803}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":56,"column":45},"generated":{"line":1,"column":823}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":57,"column":20},"generated":{"line":1,"column":826}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":58,"column":21},"generated":{"line":1,"column":832}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":58,"column":21},"generated":{"line":1,"column":837}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":58,"column":33},"generated":{"line":1,"column":839}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":58,"column":33},"generated":{"line":1,"column":851}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":862}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":1,"column":867}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":59,"column":45},"generated":{"line":1,"column":887}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":1,"column":890}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":61,"column":21},"generated":{"line":1,"column":896}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":61,"column":21},"generated":{"line":1,"column":901}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":61,"column":33},"generated":{"line":1,"column":903}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":61,"column":33},"generated":{"line":1,"column":915}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":920}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":64,"column":21},"generated":{"line":1,"column":925}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":64,"column":33},"generated":{"line":1,"column":927}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":64,"column":33},"generated":{"line":1,"column":939}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":1,"column":945}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":67,"column":16},"generated":{"line":1,"column":951}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":20},"generated":{"line":1,"column":959}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":27},"generated":{"line":1,"column":961}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":31},"generated":{"line":1,"column":965}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":40},"generated":{"line":1,"column":967}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":40},"generated":{"line":1,"column":976}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":53},"generated":{"line":1,"column":988}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":80},"generated":{"line":1,"column":1013}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":94},"generated":{"line":1,"column":1015}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":69,"column":101},"generated":{"line":1,"column":1020}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":70,"column":20},"generated":{"line":1,"column":1034}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":72,"column":12},"generated":{"line":1,"column":1043}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":1,"column":1045}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":72,"column":29},"generated":{"line":1,"column":1050}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":75,"column":15},"generated":{"line":1,"column":1053}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":75,"column":15},"generated":{"line":1,"column":1060}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":83,"column":11},"generated":{"line":1,"column":1063}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":83,"column":11},"generated":{"line":1,"column":1065}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":83,"column":11},"generated":{"line":1,"column":1075}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":83,"column":4},"generated":{"line":1,"column":1088}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":83,"column":24},"generated":{"line":1,"column":1097}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":1100}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":15},"generated":{"line":1,"column":1107}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":33},"generated":{"line":1,"column":1109}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":33},"generated":{"line":1,"column":1127}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":39},"generated":{"line":1,"column":1133}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":44},"generated":{"line":1,"column":1138}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":84,"column":54},"generated":{"line":1,"column":1148}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":87,"column":12},"generated":{"line":1,"column":1153}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":87,"column":12},"generated":{"line":1,"column":1155}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":87,"column":12},"generated":{"line":1,"column":1165}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":87,"column":4},"generated":{"line":1,"column":1185}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":87,"column":32},"generated":{"line":1,"column":1194}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":88,"column":13},"generated":{"line":1,"column":1197}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":88,"column":13},"generated":{"line":1,"column":1202}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":88,"column":34},"generated":{"line":1,"column":1223}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":88,"column":42},"generated":{"line":1,"column":1225}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":88,"column":50},"generated":{"line":1,"column":1232}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":90,"column":37},"generated":{"line":1,"column":1280}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":90,"column":12},"generated":{"line":1,"column":1284}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":90,"column":20},"generated":{"line":1,"column":1286}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":91,"column":17},"generated":{"line":1,"column":1300}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":91,"column":17},"generated":{"line":1,"column":1305}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":91,"column":38},"generated":{"line":1,"column":1326}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":91,"column":46},"generated":{"line":1,"column":1328}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":91,"column":60},"generated":{"line":1,"column":1341}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":1385}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":1387}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":95,"column":12},"generated":{"line":1,"column":1397}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":95,"column":4},"generated":{"line":1,"column":1417}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":95,"column":32},"generated":{"line":1,"column":1426}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":1429}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":96,"column":13},"generated":{"line":1,"column":1432}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":96,"column":13},"generated":{"line":1,"column":1437}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":96,"column":34},"generated":{"line":1,"column":1458}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":96,"column":42},"generated":{"line":1,"column":1460}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":96,"column":56},"generated":{"line":1,"column":1473}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":98,"column":29},"generated":{"line":1,"column":1521}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":98,"column":12},"generated":{"line":1,"column":1525}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":98,"column":20},"generated":{"line":1,"column":1527}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":99,"column":18},"generated":{"line":1,"column":1532}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":99,"column":18},"generated":{"line":1,"column":1538}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":99,"column":22},"generated":{"line":1,"column":1542}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":99,"column":28},"generated":{"line":1,"column":1548}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":103,"column":12},"generated":{"line":1,"column":1592}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":103,"column":12},"generated":{"line":1,"column":1594}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":103,"column":12},"generated":{"line":1,"column":1604}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":103,"column":4},"generated":{"line":1,"column":1624}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":103,"column":32},"generated":{"line":1,"column":1633}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":104,"column":12},"generated":{"line":1,"column":1636}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":104,"column":12},"generated":{"line":1,"column":1639}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":104,"column":20},"generated":{"line":1,"column":1641}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":104,"column":30},"generated":{"line":1,"column":1649}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":104,"column":38},"generated":{"line":1,"column":1651}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":1657}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":105,"column":18},"generated":{"line":1,"column":1663}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":105,"column":22},"generated":{"line":1,"column":1667}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":105,"column":28},"generated":{"line":1,"column":1673}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":108,"column":13},"generated":{"line":1,"column":1717}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":108,"column":21},"generated":{"line":1,"column":1719}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":108,"column":31},"generated":{"line":1,"column":1727}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":108,"column":39},"generated":{"line":1,"column":1729}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":109,"column":17},"generated":{"line":1,"column":1736}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":109,"column":17},"generated":{"line":1,"column":1741}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":109,"column":38},"generated":{"line":1,"column":1762}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":109,"column":46},"generated":{"line":1,"column":1764}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":109,"column":53},"generated":{"line":1,"column":1770}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":112,"column":13},"generated":{"line":1,"column":1813}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":112,"column":13},"generated":{"line":1,"column":1818}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":112,"column":34},"generated":{"line":1,"column":1839}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":112,"column":42},"generated":{"line":1,"column":1841}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":112,"column":56},"generated":{"line":1,"column":1854}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":12},"generated":{"line":1,"column":1898}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":12},"generated":{"line":1,"column":1900}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":12},"generated":{"line":1,"column":1910}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":4},"generated":{"line":1,"column":1931}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":33},"generated":{"line":1,"column":1940}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":115,"column":45},"generated":{"line":1,"column":1942}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":116,"column":12},"generated":{"line":1,"column":1945}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":116,"column":29},"generated":{"line":1,"column":1948}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":116,"column":19},"generated":{"line":1,"column":1965}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":116,"column":51},"generated":{"line":1,"column":1968}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":116,"column":41},"generated":{"line":1,"column":1973}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":117,"column":18},"generated":{"line":1,"column":1975}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":117,"column":18},"generated":{"line":1,"column":1981}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":117,"column":22},"generated":{"line":1,"column":1985}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":117,"column":28},"generated":{"line":1,"column":1991}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":120,"column":0},"generated":{"line":1,"column":1995}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":1997}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":2000}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":2008}},{"source":"../../src/JsonHubProtocol.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":1,"column":2024}}],"sources":{"../../src/JsonHubProtocol.ts":"// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\nimport { CompletionMessage, HubMessage, IHubProtocol, InvocationMessage, MessageType, StreamItemMessage } from \"./IHubProtocol\";\r\nimport { ILogger, LogLevel } from \"./ILogger\";\r\nimport { TransferFormat } from \"./ITransport\";\r\nimport { NullLogger } from \"./Loggers\";\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\n\r\nconst JSON_HUB_PROTOCOL_NAME: string = \"json\";\r\n\r\n/** Implements the JSON Hub Protocol. */\r\nexport class JsonHubProtocol implements IHubProtocol {\r\n\r\n    /** @inheritDoc */\r\n    public readonly name: string = JSON_HUB_PROTOCOL_NAME;\r\n    /** @inheritDoc */\r\n    public readonly version: number = 1;\r\n\r\n    /** @inheritDoc */\r\n    public readonly transferFormat: TransferFormat = TransferFormat.Text;\r\n\r\n    /** Creates an array of {@link @microsoft/signalr.HubMessage} objects from the specified serialized representation.\r\n     *\r\n     * @param {string} input A string containing the serialized representation.\r\n     * @param {ILogger} logger A logger that will be used to log messages that occur during parsing.\r\n     */\r\n    public parseMessages(input: string, logger: ILogger): HubMessage[] {\r\n        // The interface does allow \"ArrayBuffer\" to be passed in, but this implementation does not. So let's throw a useful error.\r\n        if (typeof input !== \"string\") {\r\n            throw new Error(\"Invalid input for JSON hub protocol. Expected a string.\");\r\n        }\r\n\r\n        if (!input) {\r\n            return [];\r\n        }\r\n\r\n        if (logger === null) {\r\n            logger = NullLogger.instance;\r\n        }\r\n\r\n        // Parse the messages\r\n        const messages = TextMessageFormat.parse(input);\r\n\r\n        const hubMessages = [];\r\n        for (const message of messages) {\r\n            const parsedMessage = JSON.parse(message) as HubMessage;\r\n            if (typeof parsedMessage.type !== \"number\") {\r\n                throw new Error(\"Invalid payload.\");\r\n            }\r\n            switch (parsedMessage.type) {\r\n                case MessageType.Invocation:\r\n                    this.isInvocationMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.StreamItem:\r\n                    this.isStreamItemMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Completion:\r\n                    this.isCompletionMessage(parsedMessage);\r\n                    break;\r\n                case MessageType.Ping:\r\n                    // Single value, no need to validate\r\n                    break;\r\n                case MessageType.Close:\r\n                    // All optional values, no need to validate\r\n                    break;\r\n                default:\r\n                    // Future protocol changes can add message types, old clients can ignore them\r\n                    logger.log(LogLevel.Information, \"Unknown message type '\" + parsedMessage.type + \"' ignored.\");\r\n                    continue;\r\n            }\r\n            hubMessages.push(parsedMessage);\r\n        }\r\n\r\n        return hubMessages;\r\n    }\r\n\r\n    /** Writes the specified {@link @microsoft/signalr.HubMessage} to a string and returns it.\r\n     *\r\n     * @param {HubMessage} message The message to write.\r\n     * @returns {string} A string containing the serialized representation of the message.\r\n     */\r\n    public writeMessage(message: HubMessage): string {\r\n        return TextMessageFormat.write(JSON.stringify(message));\r\n    }\r\n\r\n    private isInvocationMessage(message: InvocationMessage): void {\r\n        this.assertNotEmptyString(message.target, \"Invalid payload for Invocation message.\");\r\n\r\n        if (message.invocationId !== undefined) {\r\n            this.assertNotEmptyString(message.invocationId, \"Invalid payload for Invocation message.\");\r\n        }\r\n    }\r\n\r\n    private isStreamItemMessage(message: StreamItemMessage): void {\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for StreamItem message.\");\r\n\r\n        if (message.item === undefined) {\r\n            throw new Error(\"Invalid payload for StreamItem message.\");\r\n        }\r\n    }\r\n\r\n    private isCompletionMessage(message: CompletionMessage): void {\r\n        if (message.result && message.error) {\r\n            throw new Error(\"Invalid payload for Completion message.\");\r\n        }\r\n\r\n        if (!message.result && message.error) {\r\n            this.assertNotEmptyString(message.error, \"Invalid payload for Completion message.\");\r\n        }\r\n\r\n        this.assertNotEmptyString(message.invocationId, \"Invalid payload for Completion message.\");\r\n    }\r\n\r\n    private assertNotEmptyString(value: any, errorMessage: string): void {\r\n        if (typeof value !== \"string\" || value === \"\") {\r\n            throw new Error(errorMessage);\r\n        }\r\n    }\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"68fc4abffbedf3a50b1b56ec92cfbd01","cacheData":{"env":{}}}